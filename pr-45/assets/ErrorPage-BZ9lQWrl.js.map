{"version":3,"file":"ErrorPage-BZ9lQWrl.js","sources":["../../src/pages/ErrorPage.ts"],"sourcesContent":["import { PageComponent } from '../components/PageComponent';\nimport MainContentImpl from '../components/MainContentImpl';\nimport { PageContext } from '../interfaces/PageContext';\nimport { getFullPath } from '../config/app';\n\ninterface ErrorPageParams {\n  code?: string;\n  message?: string;\n  details?: string;\n}\n\nexport default class ErrorPage extends PageComponent {\n  private error: ErrorPageParams = {\n    code: '404',\n    message: 'Page Not Found',\n    details: 'The page you are looking for does not exist.'\n  };\n\n  constructor(mainContent: MainContentImpl, pageContext: PageContext) {\n    super(mainContent, pageContext, {\n      pageTitle: 'Error',\n      pageId: 'error-page'\n    });\n    \n    // Read error information from RouteContext if route failed\n    const routeContext = pageContext.getRouteContext();\n    if (routeContext.failed()) {\n      const failure = routeContext.failure();\n      if (failure) {\n        this.error = {\n          code: failure.code || '404',\n          message: failure.message || 'Page Not Found',\n          details: failure.details || 'The page you are looking for does not exist.'\n        };\n      }\n    }\n  }\n\n  setParams(params: ErrorPageParams): void {\n    this.error = {\n      ...this.error,\n      ...params\n    };\n  }\n\n  protected async onInit(): Promise<void> {\n    try {\n      // Wait for DOM to be ready if needed\n      if (document.readyState === 'loading') {\n        await new Promise((resolve) => {\n          document.addEventListener('DOMContentLoaded', resolve);\n        });\n      }\n\n      // Set browser tab title\n      document.title = `${this.error.code} - ${this.error.message} - Opinion`;\n\n      // Load main content\n      await this.loadMainContent();\n\n      // Wait a moment for page context to be available\n      await new Promise(resolve => setTimeout(resolve, 0));\n\n      // Breadcrumbs are now managed automatically by RouterService\n    } catch (error) {\n      this.logger.error('‚ùå ErrorPage - Initialization failed:', error);\n      throw error;\n    }\n  }\n\n  private async loadMainContent(): Promise<void> {\n    const mainElement = this.mainContent.getElement();\n    if (!mainElement) return;\n\n    mainElement.innerHTML = `\n      <div class=\"error-page\">\n        <div class=\"error-container\">\n          <h1 class=\"error-code\">${this.error.code}</h1>\n          <h2 class=\"error-message\">${this.error.message}</h2>\n          <p class=\"error-details\">${this.error.details}</p>\n          <div class=\"error-actions\">\n            <a href=\"${getFullPath('/')}\" class=\"button-primary\">Go to Homepage</a>\n            <button onclick=\"window.history.back()\" class=\"button-secondary\">Go Back</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n\n  protected setupEventListeners(): void {\n    // Set up basic event delegation\n    this.setupEventDelegation();\n\n    // Add handler for 'Go Back' button\n    const mainElement = this.mainContent.getElement();\n    if (mainElement) {\n      this.addEventListener(mainElement, 'click', (event) => {\n        const target = event.target as HTMLElement;\n        if (target.matches('.button-secondary')) {\n          event.preventDefault();\n          window.history.back();\n        }\n      });\n    }\n  }\n\n  protected onDestroy(): void {\n    // Clean up handled by PageComponent\n  }\n}"],"names":["ErrorPage","PageComponent","mainContent","pageContext","routeContext","failure","params","resolve","error","mainElement","getFullPath","event"],"mappings":"+CAWA,MAAqBA,UAAkBC,CAAc,CAOnD,YAAYC,EAA8BC,EAA0B,CAClE,MAAMD,EAAaC,EAAa,CAC9B,UAAW,QACX,OAAQ,YAAA,CACT,EAVH,KAAQ,MAAyB,CAC/B,KAAM,MACN,QAAS,iBACT,QAAS,8CAAA,EAUT,MAAMC,EAAeD,EAAY,gBAAA,EACjC,GAAIC,EAAa,SAAU,CACzB,MAAMC,EAAUD,EAAa,QAAA,EACzBC,IACF,KAAK,MAAQ,CACX,KAAMA,EAAQ,MAAQ,MACtB,QAASA,EAAQ,SAAW,iBAC5B,QAASA,EAAQ,SAAW,8CAAA,EAGlC,CACF,CAEA,UAAUC,EAA+B,CACvC,KAAK,MAAQ,CACX,GAAG,KAAK,MACR,GAAGA,CAAA,CAEP,CAEA,MAAgB,QAAwB,CACtC,GAAI,CAEE,SAAS,aAAe,WAC1B,MAAM,IAAI,QAASC,GAAY,CAC7B,SAAS,iBAAiB,mBAAoBA,CAAO,CACvD,CAAC,EAIH,SAAS,MAAQ,GAAG,KAAK,MAAM,IAAI,MAAM,KAAK,MAAM,OAAO,aAG3D,MAAM,KAAK,gBAAA,EAGX,MAAM,IAAI,QAAQA,GAAW,WAAWA,EAAS,CAAC,CAAC,CAGrD,OAASC,EAAO,CACd,WAAK,OAAO,MAAM,uCAAwCA,CAAK,EACzDA,CACR,CACF,CAEA,MAAc,iBAAiC,CAC7C,MAAMC,EAAc,KAAK,YAAY,WAAA,EAChCA,IAELA,EAAY,UAAY;AAAA;AAAA;AAAA,mCAGO,KAAK,MAAM,IAAI;AAAA,sCACZ,KAAK,MAAM,OAAO;AAAA,qCACnB,KAAK,MAAM,OAAO;AAAA;AAAA,uBAEhCC,EAAY,GAAG,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,MAMrC,CAGU,qBAA4B,CAEpC,KAAK,qBAAA,EAGL,MAAMD,EAAc,KAAK,YAAY,WAAA,EACjCA,GACF,KAAK,iBAAiBA,EAAa,QAAUE,GAAU,CACtCA,EAAM,OACV,QAAQ,mBAAmB,IACpCA,EAAM,eAAA,EACN,OAAO,QAAQ,KAAA,EAEnB,CAAC,CAEL,CAEU,WAAkB,CAE5B,CACF"}