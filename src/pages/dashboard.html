<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Dashboard - Opinion</title>
    <meta name="description" content="Opinion - Modern survey management platform">
    <meta name="keywords" content="surveys, opinion, feedback, analytics">
    <meta property="og:title" content="Opinion">
    <meta property="og:description" content="Modern survey management platform - fast, easy and powerful.">
    <meta http-equiv="content-language" content="en">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <!-- Styles are imported via Vite in main.ts -->
</head>
<body id="top">
    <div class="wrapper-constructed cW">
        <div class="wrapper-content">
            <!-- Header -->
            <div class="wrapper-header">
                <div class="header-container">
                    <div class="header-toolbar">
                        <div class="header-toolbar-left-panel">
                            <div class="logo-container">
                                <a href="/dashboard" title="Opinion - Survey Management Platform" class="logo">Opinion</a>
                            </div>
                        </div>
                        <div class="header-toolbar-right-side">
                            <div class="user-menu-container">
                                <div class="user-menu-trigger" id="user_menu_trigger">
                                    <div class="user-avatar">
                                        <i class="user-icon">üë§</i>
                                    </div>
                                    <div class="user-info">
                                        <span class="username" id="label_username">Loading...</span>
                                        <i class="dropdown-arrow">‚ñº</i>
                                    </div>
                                </div>
                                <div class="user-menu-dropdown" id="user_menu_dropdown" style="display: none;">
                                    <div class="user-menu-header">
                                        <div class="user-menu-avatar">
                                            <i class="user-icon-large">üë§</i>
                                        </div>
                                        <div class="user-menu-details">
                                            <div class="user-menu-name" id="user_menu_name">Loading...</div>
                                            <div class="user-menu-email">demo@example.com</div>
                                        </div>
                                    </div>
                                    <div class="user-menu-divider"></div>
                                    <ul class="user-menu-items">
                                        <li>
                                            <a href="/account" class="user-menu-item">
                                                <i class="menu-icon">‚öôÔ∏è</i>
                                                <span>Account Settings</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:;" onclick="feedback()" class="user-menu-item">
                                                <i class="menu-icon">üí¨</i>
                                                <span>Send Feedback</span>
                                            </a>
                                        </li>
                                        <li class="user-menu-divider"></li>
                                        <li>
                                            <a href="/logout" class="user-menu-item user-menu-signout">
                                                <i class="menu-icon">üö™</i>
                                                <span>Sign Out</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Left Sidebar -->
            <aside class="app-sidebar" id="app_sidebar" role="navigation" aria-label="Main navigation">
                <div class="sidebar-wrapper">
                    <!-- Sidebar Header -->
                    <div class="sidebar-header">
                        <div class="sidebar-brand">
                            <h1 class="brand-title">Opinion</h1>
                        </div>
                        <button class="sidebar-toggle" id="sidebar_toggle" type="button" aria-label="Toggle Sidebar" aria-expanded="true">
                            <span class="hamburger-icon" style="font-family: Arial, monospace; font-size: 20px; line-height: 1; color: inherit; display: flex; align-items: center; justify-content: center;">‚ò∞</span>
                        </button>
                    </div>
                    
                    <!-- Sidebar Navigation -->
                    <nav class="sidebar-navigation" role="navigation">
                        <div class="nav-section">
                            <ul class="nav-list" role="menubar">
                                <!-- Dashboard -->
                                <li class="nav-item" role="none">
                                    <a href="/dashboard" class="nav-link nav-link-active" role="menuitem" aria-current="page">
                                        <i class="nav-icon material-icons" aria-hidden="true">dashboard</i>
                                        <span class="nav-text">Dashboard</span>
                                    </a>
                                </li>
                                
                                <!-- Surveys -->
                                <li class="nav-item" role="none">
                                    <a href="/surveys" class="nav-link" role="menuitem">
                                        <i class="nav-icon material-icons" aria-hidden="true">poll</i>
                                        <span class="nav-text">Surveys</span>
                                        <span class="nav-badge" id="total_surveys_count" aria-label="Total surveys">5</span>
                                    </a>
                                </li>
                                
                                <!-- Accounts -->
                                <li class="nav-item" role="none">
                                    <a href="/accounts" class="nav-link" role="menuitem">
                                        <i class="nav-icon material-icons" aria-hidden="true">business</i>
                                        <span class="nav-text">Accounts</span>
                                    </a>
                                </li>
                                
                                <!-- Collectors -->
                                <li class="nav-item" role="none">
                                    <a href="/collectors" class="nav-link" role="menuitem">
                                        <i class="nav-icon material-icons" aria-hidden="true">collections_bookmark</i>
                                        <span class="nav-text">Collectors</span>
                                    </a>
                                </li>
                                
                                <!-- Billing -->
                                <li class="nav-item" role="none">
                                    <a href="/billing" class="nav-link" role="menuitem">
                                        <i class="nav-icon material-icons" aria-hidden="true">payment</i>
                                        <span class="nav-text">Billing</span>
                                    </a>
                                </li>
                                
                                <!-- System Menu (Expandable) -->
                                <li class="nav-item nav-item-expandable" id="system_nav_item" role="none">
                                    <button class="nav-link nav-link-expandable" id="system_nav_trigger" type="button" role="menuitem" aria-expanded="false" aria-controls="system_submenu">
                                        <i class="nav-icon material-icons" aria-hidden="true">settings</i>
                                        <span class="nav-text">System</span>
                                        <i class="nav-arrow material-icons" aria-hidden="true">expand_more</i>
                                    </button>
                                    <ul class="nav-submenu" id="system_submenu" role="menu" aria-labelledby="system_nav_trigger">
                                        <li class="nav-subitem" role="none">
                                            <a href="/setup/plans" class="nav-sublink" role="menuitem">
                                                <i class="nav-subicon material-icons" aria-hidden="true">receipt</i>
                                                <span class="nav-subtext">Plans</span>
                                            </a>
                                        </li>
                                        <li class="nav-subitem" role="none">
                                            <a href="/setup/jobs" class="nav-sublink" role="menuitem">
                                                <i class="nav-subicon material-icons" aria-hidden="true">work</i>
                                                <span class="nav-subtext">Jobs</span>
                                            </a>
                                        </li>
                                        <li class="nav-subitem" role="none">
                                            <a href="/system/events" class="nav-sublink" role="menuitem">
                                                <i class="nav-subicon material-icons" aria-hidden="true">event</i>
                                                <span class="nav-subtext">System Events</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    
                    <!-- Sidebar Footer -->
                    <div class="sidebar-footer">
                        <div class="footer-content">
                            <small class="copyright-text">¬© 2024 Inqwise Ltd</small>
                        </div>
                    </div>
                </div>
            </aside>
            
            
            <!-- Sidebar Overlay for mobile -->
            <div class="sidebar-overlay" id="sidebar_overlay"></div>

            <!-- Main Content -->
            <div class="main-content" id="main_content">
                <div class="content-container XcO">
                                <div class="breadcrumbs">
                                    <span style="color: #999">Dashboard</span>
                                </div>

                                <div>
                                    <!-- Dashboard Header -->
                                    <table class="placeholder-header">
                                        <tbody>
                                            <tr>
                                                <td class="cell-left">
                                                    <h1>Dashboard</h1>
                                                </td>
                                                <td class="cell-right">
                                                    <a href="/surveys/create" title="Create Survey" class="button-green" id="button_create_survey">
                                                        <span><i class="icon-add-white">&nbsp;</i>Create Survey</span>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <!-- Welcome Message -->
                                    <div id="container_welcome" style="display: none;">
                                        <div style="clear: both;">
                                            <h3 class="ui-header-light">Getting started with Opinion</h3>
                                            <div style="padding-top: 12px;">Begin by clicking "Create Survey", which is first among the options.</div>
                                        </div>
                                        <div style="padding-top: 12px;">
                                            <a href="/surveys/create" title="Create Survey" class="button-green">
                                                <span><i class="icon-add-white">&nbsp;</i>Create Survey</span>
                                            </a>
                                            <span style="margin-left: 6px;">Make it easy, Create your first survey!</span>
                                        </div>
                                    </div>

                                    <!-- Activity Section -->
                                    <div id="container_activity" style="clear: both;">
                                        <div>
                                            <h3 class="ui-header-light">Responses Activity</h3>
                                            <div style="clear: both;padding-top: 10px;">
                                                <table cellpadding="0" cellspacing="0" border="0" width="100%">
                                                    <tbody>
                                                        <tr>
                                                            <td valign="top">
                                                                <div class="params">
                                                                    <div class="param-value" style="width: 200px; margin-right: 6px;">
                                                                        <select id="select_surveys" style="width: 100%; display: none;">
                                                                            <option value="0">All surveys</option>
                                                                        </select>
                                                                        <div class="chosen-container" id="select_surveys_chosen">
                                                                            <a class="chosen-single" tabindex="-1">
                                                                                <span>All surveys</span>
                                                                                <div><b></b></div>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="param-value">
                                                                        <div id="button_status" data-value="1">
                                                                            <div class="ui-button-dropdown">
                                                                                <a href="javascript:;" title="Started" class="button-white">
                                                                                    <span><b><i class="legend" style="background-color: #3b5998"></i>Started</b><i class="icon-more">&nbsp;</i></span>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="param-value" style="margin-left: 6px; margin-right: 6px;">vs</div>
                                                                    <div class="param-value">
                                                                        <div id="button_comparison_status" data-value="0">
                                                                            <div class="ui-button-dropdown">
                                                                                <a href="javascript:;" title="None" class="button-white">
                                                                                    <span><b>None</b><i class="icon-more">&nbsp;</i></span>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td valign="top">
                                                                <div style="float: right; position: relative; text-align: left" id="daterange">
                                                                    <div class="datepicker-text" id="datepicker_text">
                                                                        <div class="datepicker-date-range-container">
                                                                            <span id="datepicker_date_range_description">Today: </span>
                                                                            <span id="datepicker_date_range_value"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <!-- Statistics -->
                                            <ul class="insights-statistics">
                                                <li>
                                                    <div>
                                                        <div>Responses</div>
                                                        <div class="insights-statistics-figure label-started">0</div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <div>Completed</div>
                                                        <div class="insights-statistics-figure label-completed">0</div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <div>Completion Rate</div>
                                                        <div class="insights-statistics-figure label-completion-rate">0.00%</div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <div>Partial</div>
                                                        <div class="insights-statistics-figure label-partial">0</div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <div>Disqualified</div>
                                                        <div class="insights-statistics-figure label-disqualified">0</div>
                                                    </div>
                                                </li>
                                            </ul>

                                            <!-- Chart -->
                                            <div id="chart" style="min-width: 450px; height: 140px; margin: 0 auto;"></div>
                                        </div>

                                        <!-- Recent Surveys -->
                                        <div style="clear: both; padding-top: 20px;">
                                            <h3 class="ui-header-light">Recent Surveys</h3>
                                            <div style="padding-top: 12px;">
                                                Below is a list of the 5 recently modified surveys ordered by modify date.
                                            </div>
                                            <div style="padding-top: 12px; clear: both; display: block;">
                                                <div id="table_recent_surveys" class="data-table">
                                                    <div class="data-table-body">
                                                        <table id="table_recent_surveys_table_view" cellpadding="0" cellspacing="0" border="0" width="100%">
                                                            <thead>
                                                                <tr>
                                                                    <th class="first-item sortable" style="width: 46px; text-align: right;">#</th>
                                                                    <th style="width: 12px;"></th>
                                                                    <th class="sortable">Name</th>
                                                                    <th style="text-align: right;" class="sortable">Responses</th>
                                                                    <th style="text-align: right;" class="sortable">Completed</th>
                                                                    <th style="text-align: right;" class="sortable">Completion Rate</th>
                                                                    <th style="text-align: right;" class="sortable">Partial</th>
                                                                    <th style="text-align: right;" class="sortable">Disqualified</th>
                                                                    <th style="text-align: right;">Avg. Time Taken</th>
                                                                    <th class="sortable">Last Response Date</th>
                                                                    <th class="last-item sortable">Modify Date</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="survey_table_body">
                                                                <!-- Survey rows will be inserted here -->
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="clear: both; padding-top: 20px;">
                                    &nbsp;
                                </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="wrapper-footer XcO">
            <div class="footer-container">
                <div>
                    <div class="footer-navigation-left-panel">
                        <ul class="ld">
                            <li class="first-item last-item">
                                <a href="/create-bug-report" title="Report a Bug">Report a Bug</a>
                            </li>
                        </ul>
                    </div>
                    <div class="footer-navigation-right-panel"></div>
                </div>
                <div class="footer-copyright">
                    <table cellpadding="0" cellspacing="0" border="0" width="100%">
                        <tbody>
                            <tr>
                                <td valign="top">Copyright ¬© 2011-2025 Inqwise Ltd. All rights reserved.</td>
                                <td valign="top" style="text-align: right"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Enhanced Sidebar Elements
            const appSidebar = document.getElementById('app_sidebar');
            const sidebarToggle = document.getElementById('sidebar_toggle');
            const overlay = document.getElementById('sidebar_overlay');
            const mainContent = document.getElementById('main_content');
            
            // System menu expandable functionality
            const systemNavItem = document.getElementById('system_nav_item');
            const systemNavTrigger = document.getElementById('system_nav_trigger');
            const systemSubmenu = document.getElementById('system_submenu');
            
            // Enhanced Sidebar toggle handler
            function toggleSidebar() {
                const isCollapsed = appSidebar.classList.contains('sidebar-collapsed');
                
                if (isCollapsed) {
                    // Show sidebar
                    appSidebar.classList.remove('sidebar-collapsed');
                    sidebarToggle.setAttribute('aria-expanded', 'true');
                    overlay.classList.add('active');
                    document.body.classList.add('sidebar-open');
                    document.body.classList.remove('sidebar-closed');
                } else {
                    // Hide sidebar
                    appSidebar.classList.add('sidebar-collapsed');
                    sidebarToggle.setAttribute('aria-expanded', 'false');
                    overlay.classList.remove('active');
                    document.body.classList.remove('sidebar-open');
                    document.body.classList.add('sidebar-closed');
                }
            }
            
            // Enhanced System menu toggle handler
            function toggleSystemMenu() {
                const isExpanded = systemNavTrigger.getAttribute('aria-expanded') === 'true';
                
                if (isExpanded) {
                    // Collapse system menu
                    systemNavTrigger.setAttribute('aria-expanded', 'false');
                    systemSubmenu.setAttribute('aria-expanded', 'false');
                    systemNavItem.classList.remove('nav-item-expanded');
                } else {
                    // Expand system menu
                    systemNavTrigger.setAttribute('aria-expanded', 'true');
                    systemSubmenu.setAttribute('aria-expanded', 'true');
                    systemNavItem.classList.add('nav-item-expanded');
                }
            }
            
            // Accessibility: Handle keyboard navigation
            function handleKeyboardNavigation(event) {
                if (event.key === 'Escape') {
                    // Close sidebar on Escape key
                    if (!appSidebar.classList.contains('sidebar-collapsed')) {
                        toggleSidebar();
                    }
                    
                    // Close system menu if open
                    if (systemNavTrigger.getAttribute('aria-expanded') === 'true') {
                        toggleSystemMenu();
                    }
                    
                    // Close user menu if open
                    const userMenuDropdown = document.getElementById('user_menu_dropdown');
                    const userMenuTrigger = document.getElementById('user_menu_trigger');
                    if (userMenuDropdown && userMenuDropdown.style.display === 'block') {
                        userMenuDropdown.style.display = 'none';
                        userMenuTrigger.classList.remove('active');
                    }
                }
            }
            
            // Event listeners
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleSidebar();
                });
            }
            
            if (overlay) {
                overlay.addEventListener('click', function() {
                    if (!appSidebar.classList.contains('sidebar-collapsed')) {
                        toggleSidebar();
                    }
                });
            }
            
            if (systemNavTrigger) {
                systemNavTrigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleSystemMenu();
                });
                
                // Handle keyboard events for expandable menu
                systemNavTrigger.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleSystemMenu();
                    }
                });
            }
            
            // Add keyboard event listener
            document.addEventListener('keydown', handleKeyboardNavigation);
            
            // User menu dropdown functionality
            const userMenuTrigger = document.getElementById('user_menu_trigger');
            const userMenuDropdown = document.getElementById('user_menu_dropdown');
            
            function toggleUserMenu() {
                const isVisible = userMenuDropdown.style.display === 'block';
                
                if (isVisible) {
                    userMenuDropdown.style.display = 'none';
                    userMenuDropdown.classList.remove('show');
                    userMenuDropdown.classList.add('hide');
                    userMenuTrigger.classList.remove('active');
                } else {
                    userMenuDropdown.style.display = 'block';
                    userMenuDropdown.classList.remove('hide');
                    userMenuDropdown.classList.add('show');
                    userMenuTrigger.classList.add('active');
                }
            }
            
            if (userMenuTrigger) {
                userMenuTrigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleUserMenu();
                });
            }
            
            // Close user menu when clicking outside
            document.addEventListener('click', function(e) {
                if (userMenuDropdown && userMenuTrigger && 
                    !userMenuTrigger.contains(e.target) && 
                    !userMenuDropdown.contains(e.target)) {
                    userMenuDropdown.style.display = 'none';
                    userMenuDropdown.classList.remove('show');
                    userMenuTrigger.classList.remove('active');
                }
            });
            
            // Enhanced responsive behavior
            function handleResize() {
                const isMobile = window.innerWidth <= 1024;
                const isTablet = window.innerWidth <= 768;
                
                if (isMobile) {
                    // Mobile/Tablet: hide sidebar by default
                    appSidebar.classList.add('sidebar-collapsed');
                    sidebarToggle.setAttribute('aria-expanded', 'false');
                    overlay.classList.remove('active');
                    document.body.classList.remove('sidebar-open');
                    document.body.classList.add('sidebar-closed');
                } else {
                    // Desktop: show sidebar by default
                    appSidebar.classList.remove('sidebar-collapsed');
                    sidebarToggle.setAttribute('aria-expanded', 'true');
                    overlay.classList.remove('active');
                    document.body.classList.remove('sidebar-open', 'sidebar-closed');
                }
            }
            
            // Initialize responsive behavior
            handleResize();
            
            // Listen for window resize with debouncing
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(handleResize, 100);
            });
            
            // Navigation link active state management
            function updateActiveNavigation() {
                const currentPath = window.location.pathname;
                const navLinks = document.querySelectorAll('.nav-link, .nav-sublink');
                
                navLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    if (linkPath === currentPath) {
                        link.classList.add('nav-link-active');
                        link.setAttribute('aria-current', 'page');
                        
                        // If it's a submenu item, expand the parent menu
                        if (link.classList.contains('nav-sublink')) {
                            const parentMenu = link.closest('.nav-item-expandable');
                            if (parentMenu) {
                                const trigger = parentMenu.querySelector('.nav-link-expandable');
                                const submenu = parentMenu.querySelector('.nav-submenu');
                                if (trigger && submenu) {
                                    trigger.setAttribute('aria-expanded', 'true');
                                    submenu.setAttribute('aria-expanded', 'true');
                                    parentMenu.classList.add('nav-item-expanded');
                                }
                            }
                        }
                    } else {
                        link.classList.remove('nav-link-active');
                        link.removeAttribute('aria-current');
                    }
                });
            }
            
            // Initialize navigation state
            updateActiveNavigation();
            
            // Load username (mock data for now)
            const usernameElements = document.querySelectorAll('#label_username, #user_menu_name');
            usernameElements.forEach(el => {
                el.textContent = 'Demo User';
            });
            
            // Mock survey count - already set in HTML, but ensure it's visible
            const surveyCountElement = document.getElementById('total_surveys_count');
            if (surveyCountElement && surveyCountElement.textContent === '0') {
                surveyCountElement.textContent = '5';
            }
            
            // Initialize date range (mock)
            const dateRangeValue = document.getElementById('datepicker_date_range_value');
            if (dateRangeValue) {
                const today = new Date().toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });
                dateRangeValue.textContent = today;
            }
            
            // Force hamburger icon to display correctly - handle both cases
            const hamburgerIcon = document.querySelector('.hamburger-icon');
            const sidebarToggleButton = document.getElementById('sidebar_toggle');
            
            // Check if we have the new hamburger-icon
            if (hamburgerIcon) {
                // Ensure proper styling is applied
                hamburgerIcon.style.fontFamily = 'Arial, monospace';
                hamburgerIcon.style.fontSize = '20px';
                hamburgerIcon.style.lineHeight = '1';
                hamburgerIcon.style.color = 'inherit';
                hamburgerIcon.style.display = 'flex';
                hamburgerIcon.style.alignItems = 'center';
                hamburgerIcon.style.justifyContent = 'center';
                hamburgerIcon.style.transform = 'none !important';
                hamburgerIcon.innerHTML = '‚ò∞';
                
                // Ensure it doesn't rotate when sidebar toggles
                const observer = new MutationObserver(() => {
                    hamburgerIcon.style.transform = 'none !important';
                });
                observer.observe(hamburgerIcon.parentElement, {
                    attributes: true,
                    attributeFilter: ['aria-expanded']
                });
            } 
            // Fallback: if we still have the old Material Icons version, replace it
            else if (sidebarToggleButton) {
                const materialIcon = sidebarToggleButton.querySelector('.material-icons');
                if (materialIcon) {
                    console.log('Found old Material Icons element, replacing with hamburger icon');
                    
                    // Create new hamburger icon element
                    const newHamburgerIcon = document.createElement('span');
                    newHamburgerIcon.className = 'hamburger-icon';
                    newHamburgerIcon.style.fontFamily = 'Arial, monospace';
                    newHamburgerIcon.style.fontSize = '20px';
                    newHamburgerIcon.style.lineHeight = '1';
                    newHamburgerIcon.style.color = 'inherit';
                    newHamburgerIcon.style.display = 'flex';
                    newHamburgerIcon.style.alignItems = 'center';
                    newHamburgerIcon.style.justifyContent = 'center';
                    newHamburgerIcon.style.transform = 'none !important';
                    newHamburgerIcon.innerHTML = '‚ò∞';
                    
                    // Replace the old icon with the new one
                    materialIcon.parentNode.replaceChild(newHamburgerIcon, materialIcon);
                    
                    // Ensure it doesn't rotate when sidebar toggles
                    const observer = new MutationObserver(() => {
                        newHamburgerIcon.style.transform = 'none !important';
                    });
                    observer.observe(sidebarToggleButton, {
                        attributes: true,
                        attributeFilter: ['aria-expanded']
                    });
                }
            }
            
            // Add smooth transitions for better UX
            setTimeout(() => {
                appSidebar.style.transition = 'transform 0.3s ease';
                overlay.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';
                mainContent.style.transition = 'margin-left 0.3s ease';
            }, 100);
        });
        
        // Enhanced feedback function with better UX
        function feedback() {
            const message = 'Thank you for your interest in providing feedback!\n\n' +
                           'This would typically open a feedback form or modal dialog ' +
                           'where you could submit your comments and suggestions.';
            
            if (confirm(message + '\n\nWould you like to be redirected to our feedback page?')) {
                // In a real implementation, this would redirect to the actual feedback page
                console.log('Redirecting to feedback page...');
            }
        }
        
        // Export functions for potential external use
        window.OpinionDashboard = {
            toggleSidebar: function() {
                document.getElementById('sidebar_toggle').click();
            },
            toggleSystemMenu: function() {
                document.getElementById('system_nav_trigger').click();
            }
        };
    </script>
</body>
</html>
