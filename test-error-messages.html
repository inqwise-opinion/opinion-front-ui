<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Error Messages Interactive Test</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: #f8fafc;
      line-height: 1.6;
    }
    .header {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      text-align: center;
    }
    .header h1 {
      margin: 0 0 10px 0;
      color: #1e293b;
      font-size: 2.5rem;
    }
    .header p {
      color: #64748b;
      font-size: 1.1rem;
      margin: 0;
    }
    .test-section {
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 25px;
    }
    .test-section h2 {
      margin: 0 0 20px 0;
      color: #1e293b;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .test-section h3 {
      margin: 20px 0 15px 0;
      color: #374151;
      font-size: 1.2rem;
    }
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 20px;
    }
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .btn-error { background: #dc3545; color: white; }
    .btn-warning { background: #fd7e14; color: white; }
    .btn-info { background: #0dcaf0; color: white; }
    .btn-success { background: #198754; color: white; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-purple { background: #6f42c1; color: white; }
    .btn-teal { background: #20c997; color: white; }
    .btn-pink { background: #e83e8c; color: white; }
    .btn-dark { background: #343a40; color: white; }
    .status {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 14px;
      color: #495057;
      min-height: 60px;
    }
    .checklist {
      list-style: none;
      padding: 0;
    }
    .checklist li {
      padding: 8px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .checklist li::before {
      content: '‚úÖ';
      font-size: 16px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .info-box {
      background: #e3f2fd;
      color: #1565c0;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #2196f3;
    }
    .warning-box {
      background: #fff3cd;
      color: #856404;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #ffc107;
    }
    .success-box {
      background: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #28a745;
    }
    code {
      background: #f1f3f4;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.9em;
    }
    @media (max-width: 768px) {
      .button-group {
        justify-content: center;
      }
      .btn {
        flex: 1;
        min-width: 140px;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üí¨ Error Messages Interactive Test</h1>
    <p>Interactive testing environment for error message functionality</p>
  </div>

  <!-- Status Section -->
  <div class="test-section">
    <h2>üîç Test Status</h2>
    <div class="status" id="test-status">
      Ready to test error messages. Click any button below to simulate messages.
    </div>
  </div>

  <!-- Implementation Verification -->
  <div class="test-section">
    <h2>‚úÖ Implementation Verification</h2>
    <div class="grid">
      <div class="success-box">
        <h4>Core Implementation Complete</h4>
        <ul class="checklist">
          <li>LayoutContext interface extended</li>
          <li>LayoutContextImpl methods added</li>
          <li>DebugPage simulation section</li>
          <li>Message simulation buttons</li>
        </ul>
      </div>
      <div class="info-box">
        <h4>Testing Approach</h4>
        <p>This page simulates the error message functionality without requiring the full application to be running. Perfect for isolated testing!</p>
      </div>
    </div>
  </div>

  <!-- Basic Messages Testing -->
  <div class="test-section">
    <h2>üìù Basic Message Types</h2>
    <p>Test the four core message types that are available through LayoutContext:</p>
    <div class="button-group">
      <button class="btn btn-error" onclick="testMessage('error')">
        <span class="material-icons">error</span>
        Error Message
      </button>
      <button class="btn btn-warning" onclick="testMessage('warning')">
        <span class="material-icons">warning</span>
        Warning Message
      </button>
      <button class="btn btn-info" onclick="testMessage('info')">
        <span class="material-icons">info</span>
        Info Message
      </button>
      <button class="btn btn-success" onclick="testMessage('success')">
        <span class="material-icons">check_circle</span>
        Success Message
      </button>
    </div>
  </div>

  <!-- Advanced Messages Testing -->
  <div class="test-section">
    <h2>üîß Advanced Message Features</h2>
    <p>Test advanced features like actions, persistence, auto-hide, and sequences:</p>
    <div class="button-group">
      <button class="btn btn-purple" onclick="testAdvancedMessage('action')">
        <span class="material-icons">build</span>
        With Action
      </button>
      <button class="btn btn-secondary" onclick="testAdvancedMessage('persistent')">
        <span class="material-icons">push_pin</span>
        Persistent
      </button>
      <button class="btn btn-teal" onclick="testAdvancedMessage('autoHide')">
        <span class="material-icons">schedule</span>
        Auto-hide
      </button>
      <button class="btn btn-pink" onclick="testAdvancedMessage('sequence')">
        <span class="material-icons">movie</span>
        Sequence
      </button>
    </div>
  </div>

  <!-- Message Management Testing -->
  <div class="test-section">
    <h2>üóÇÔ∏è Message Management</h2>
    <p>Test message clearing and management operations:</p>
    <div class="button-group">
      <button class="btn btn-secondary" onclick="testManagement('clearAll')">
        <span class="material-icons">clear_all</span>
        Clear All
      </button>
      <button class="btn btn-error" onclick="testManagement('clearErrors')">
        <span class="material-icons">error_outline</span>
        Clear Errors
      </button>
      <button class="btn btn-dark" onclick="testManagement('clearPersistent')">
        <span class="material-icons">delete_forever</span>
        Clear Persistent
      </button>
    </div>
  </div>

  <!-- Integration Testing -->
  <div class="test-section">
    <h2>üîó Integration Testing</h2>
    <p>Test the full integration with the actual application:</p>
    <div class="button-group">
      <button class="btn btn-primary" onclick="openMainApp()">
        <span class="material-icons">launch</span>
        Open Main App
      </button>
      <button class="btn btn-primary" onclick="openDebugPage()">
        <span class="material-icons">bug_report</span>
        Open Debug Page
      </button>
    </div>
    <div class="warning-box" style="margin-top: 15px;">
      <strong>Integration Test Instructions:</strong><br>
      1. Click "Open Debug Page" to test in the actual application<br>
      2. Look for the "üí¨ Message Simulation" section<br>
      3. Try all the buttons to verify functionality<br>
      4. Check that messages appear under the header
    </div>
  </div>

  <!-- API Documentation -->
  <div class="test-section">
    <h2>üìö API Usage Examples</h2>
    <div class="grid">
      <div>
        <h3>Basic Usage:</h3>
        <code>
          layoutContext.showError('Title', 'Description');<br>
          layoutContext.showSuccess('Saved', 'Data saved!');
        </code>
      </div>
      <div>
        <h3>Management:</h3>
        <code>
          layoutContext.clearMessages();<br>
          layoutContext.clearMessagesByType('error');
        </code>
      </div>
    </div>
  </div>

  <script>
    let messageCount = 0;

    function updateStatus(message, type = 'info') {
      const status = document.getElementById('test-status');
      const timestamp = new Date().toLocaleTimeString();
      status.innerHTML = `
        <strong>[${timestamp}]</strong> ${message}<br>
        <small>This simulation demonstrates the API calls that would be made to LayoutContext</small>
      `;
      
      // Style based on type
      status.style.borderLeft = `4px solid ${
        type === 'error' ? '#dc3545' :
        type === 'warning' ? '#fd7e14' :
        type === 'success' ? '#198754' :
        '#0dcaf0'
      }`;
    }

    function testMessage(type) {
      messageCount++;
      const messages = {
        error: {
          title: 'Connection Failed',
          description: 'Unable to connect to the server. Please check your internet connection.',
          call: `layoutContext.showError('Connection Failed', 'Unable to connect to server')`
        },
        warning: {
          title: 'Session Expiring',
          description: 'Your session will expire in 5 minutes. Save your work to avoid losing data.',
          call: `layoutContext.showWarning('Session Expiring', 'Save your work soon')`
        },
        info: {
          title: 'New Feature Available',
          description: 'Check out the new dashboard features in the sidebar navigation.',
          call: `layoutContext.showInfo('New Feature Available', 'Check out the dashboard')`
        },
        success: {
          title: 'Data Saved',
          description: 'Your changes have been saved successfully to the server.',
          call: `layoutContext.showSuccess('Data Saved', 'Changes saved successfully')`
        }
      };

      const msg = messages[type];
      updateStatus(`‚ú® Simulated ${type.toUpperCase()} message #${messageCount}:<br>
                   <strong>${msg.title}</strong> - ${msg.description}<br>
                   <code>${msg.call}</code>`, type);
      
      console.log(`%cüéØ Error Message Test - ${type.toUpperCase()}`, 'color: #2563eb; font-weight: bold');
      console.log(`Title: ${msg.title}`);
      console.log(`Description: ${msg.description}`);
      console.log(`API Call: ${msg.call}`);
    }

    function testAdvancedMessage(feature) {
      messageCount++;
      const features = {
        action: {
          title: 'Network Error with Retry Action',
          description: 'This message includes a retry button that users can click',
          call: `errorMessages.addMessage({id: 'network-error', type: 'error', actions: [{id: 'retry', text: 'Retry', action: retryFn}]})`
        },
        persistent: {
          title: 'Persistent Warning Message',
          description: 'This message persists across page navigation until explicitly cleared',
          call: `errorMessages.addMessage({id: 'persistent-msg', type: 'warning', persistent: true})`
        },
        autoHide: {
          title: 'Auto-Hide Info Message',
          description: 'This message automatically disappears after 3 seconds',
          call: `errorMessages.addMessage({id: 'auto-hide', type: 'info', autoHide: true, autoHideDelay: 3000})`
        },
        sequence: {
          title: 'Message Sequence Started',
          description: 'Showing 5 messages in sequence with 2-second delays between each',
          call: `showMessageSequence() // Shows info ‚Üí warning ‚Üí error ‚Üí success sequence`
        }
      };

      const feature_info = features[feature];
      updateStatus(`üîß Simulated ADVANCED ${feature.toUpperCase()} feature #${messageCount}:<br>
                   <strong>${feature_info.title}</strong><br>
                   ${feature_info.description}<br>
                   <code>${feature_info.call}</code>`, 'info');

      console.log(`%cüöÄ Advanced Feature Test - ${feature.toUpperCase()}`, 'color: #6f42c1; font-weight: bold');
      console.log(`Feature: ${feature_info.title}`);
      console.log(`Description: ${feature_info.description}`);
      console.log(`API Call: ${feature_info.call}`);
    }

    function testManagement(action) {
      const actions = {
        clearAll: {
          title: 'Clear All Messages',
          description: 'Removes all non-persistent messages from display',
          call: `layoutContext.clearMessages(false)`
        },
        clearErrors: {
          title: 'Clear Error Messages Only',
          description: 'Removes only error-type messages, leaving warnings/info/success',
          call: `layoutContext.clearMessagesByType('error')`
        },
        clearPersistent: {
          title: 'Clear All Including Persistent',
          description: 'Removes ALL messages including those marked as persistent',
          call: `layoutContext.clearMessages(true)`
        }
      };

      const action_info = actions[action];
      updateStatus(`üóÇÔ∏è Simulated MANAGEMENT action:<br>
                   <strong>${action_info.title}</strong><br>
                   ${action_info.description}<br>
                   <code>${action_info.call}</code>`, 'warning');

      console.log(`%cüßπ Message Management Test - ${action.toUpperCase()}`, 'color: #dc3545; font-weight: bold');
      console.log(`Action: ${action_info.title}`);
      console.log(`Description: ${action_info.description}`);
      console.log(`API Call: ${action_info.call}`);
    }

    function openMainApp() {
      const url = 'http://localhost:3002';
      updateStatus(`üöÄ Opening main application in new tab: ${url}<br>
                   Look for the error messages container under the header!`, 'success');
      window.open(url, '_blank');
    }

    function openDebugPage() {
      const url = 'http://localhost:3002';
      updateStatus(`üêõ Opening Debug Page (default page) in new tab: ${url}<br>
                   Look for the "üí¨ Message Simulation" section to test the real functionality!`, 'success');
      window.open(url, '_blank');
    }

    // Add keyboard shortcuts for convenience
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        switch(e.key) {
          case '1': e.preventDefault(); testMessage('error'); break;
          case '2': e.preventDefault(); testMessage('warning'); break;
          case '3': e.preventDefault(); testMessage('info'); break;
          case '4': e.preventDefault(); testMessage('success'); break;
          case 'o': e.preventDefault(); openMainApp(); break;
          case 'd': e.preventDefault(); openDebugPage(); break;
        }
      }
    });

    // Initialize
    console.log('%cüí¨ Error Messages Test Page Loaded', 'color: #16a34a; font-size: 16px; font-weight: bold');
    console.log('Keyboard shortcuts:');
    console.log('  Ctrl+1: Test Error Message');
    console.log('  Ctrl+2: Test Warning Message');
    console.log('  Ctrl+3: Test Info Message');
    console.log('  Ctrl+4: Test Success Message');
    console.log('  Ctrl+O: Open Main App');
    console.log('  Ctrl+D: Open Debug Page');
    
    updateStatus('Error Messages Test Page loaded successfully. Ready to test!', 'success');
  </script>
</body>
</html>
