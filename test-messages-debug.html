<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages Debug Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
        .console {
            background: #1e1e1e;
            color: #fff;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
            font-size: 12px;
        }
        button {
            margin: 5px;
            padding: 10px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        iframe { width: 100%; height: 600px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Messages Component Debug Test</h1>
    
    <div class="test-container">
        <h2>Instructions:</h2>
        <ol>
            <li>Make sure the development server is running on port 3000</li>
            <li><strong>ðŸ”¥ IMPORTANT: Refresh your browser tab with http://localhost:3000 to pick up the code changes!</strong></li>
            <li>Open browser DevTools console (F12)</li>
            <li>Click "Load DebugPage" below or "Open in New Tab"</li>
            <li>Look at the console logs for detailed debugging information</li>
            <li>Try clicking the Error, Warning, Info, and Success buttons in the DebugPage</li>
            <li>Check if messages appear and what the console shows</li>
        </ol>
    </div>

    <div class="test-container">
        <h2>Live Test:</h2>
        <button onclick="loadDebugPage()">Load DebugPage</button>
        <button onclick="openInNewTab()">Open in New Tab</button>
        <button onclick="showConsole()">Toggle Console Monitor</button>
    </div>

    <div class="test-container" style="display: none;" id="console-monitor">
        <h2>Console Monitor:</h2>
        <div id="console-log" class="console">Console logs will appear here...</div>
        <button onclick="clearConsole()">Clear Console</button>
    </div>

    <div class="test-container">
        <iframe id="debug-frame" src="about:blank"></iframe>
    </div>

    <script>
        let consoleVisible = false;
        const consoleLog = document.getElementById('console-log');
        
        // Intercept console logs
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function logToMonitor(type, args) {
            const timestamp = new Date().toLocaleTimeString();
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const logEntry = document.createElement('div');
            logEntry.style.marginBottom = '4px';
            logEntry.style.color = type === 'error' ? '#ff6b6b' : 
                                  type === 'warn' ? '#ffa726' : '#4fc3f7';
            logEntry.textContent = `[${timestamp}] [${type.toUpperCase()}] ${message}`;
            
            consoleLog.appendChild(logEntry);
            consoleLog.scrollTop = consoleLog.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            if (consoleVisible) logToMonitor('log', args);
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            if (consoleVisible) logToMonitor('error', args);
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            if (consoleVisible) logToMonitor('warn', args);
        };
        
        function loadDebugPage() {
            const iframe = document.getElementById('debug-frame');
            iframe.src = 'http://localhost:3000';
            console.log('ðŸš€ Loading DebugPage in iframe...');
        }
        
        function openInNewTab() {
            window.open('http://localhost:3000', '_blank');
            console.log('ðŸš€ Opened DebugPage in new tab - check the browser console there!');
        }
        
        function showConsole() {
            consoleVisible = !consoleVisible;
            const monitor = document.getElementById('console-monitor');
            monitor.style.display = consoleVisible ? 'block' : 'none';
            
            if (consoleVisible) {
                console.log('ðŸ”§ Console monitoring enabled');
                logToMonitor('log', ['ðŸ”§ Console monitoring started']);
            } else {
                console.log('ðŸ”§ Console monitoring disabled');
            }
        }
        
        function clearConsole() {
            consoleLog.innerHTML = 'Console cleared...';
        }
        
        // Listen for messages from the iframe
        window.addEventListener('message', (event) => {
            if (event.origin === 'http://localhost:3000') {
                console.log('ðŸ“¨ Message from DebugPage:', event.data);
                if (consoleVisible) {
                    logToMonitor('message', ['ðŸ“¨ From DebugPage:', event.data]);
                }
            }
        });
        
        // Auto-load on startup
        setTimeout(() => {
            console.log('ðŸ”§ Debug test page ready. Load the DebugPage to start testing.');
        }, 500);
    </script>
</body>
</html>